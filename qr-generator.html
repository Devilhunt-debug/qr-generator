<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>QR Generator (Color Themes)</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, button, select { margin: 5px; padding: 8px; }
    canvas { margin-top: 20px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h2>QR Generator (Color Themes)</h2>
  <label>Text or URL:</label><br>
  <input type="text" id="qrText" size="50" placeholder="Enter URL or text"><br>
  <label>Pixel size (module scale):</label><br>
  <input type="number" id="pixelSize" value="10" min="1"><br>
  <label>Quiet zone (modules):</label><br>
  <input type="number" id="quietZone" value="4" min="0"><br>
  <label>Color Theme:</label><br>
  <select id="colorTheme">
    <option value="classic">Classic Black</option>
    <option value="red">Red Alert</option>
    <option value="blue">Cyber Blue</option>
  </select><br>
  <button onclick="generateQR()">Generate</button>
  <button onclick="clearQR()">Clear</button>
  <a id="downloadLink" style="display:none;" download="qr-code.png">Download PNG</a>
  <br><canvas id="qrCanvas"></canvas>

  <script>
    function generateQR() {
      const text = document.getElementById('qrText').value.trim();
      const pixelSize = parseInt(document.getElementById('pixelSize').value);
      const quietZone = parseInt(document.getElementById('quietZone').value);
      const theme = document.getElementById('colorTheme').value;
      if (!text) return alert("Enter text or URL");

      const qr = qrcode(0, 'L');
      qr.addData(text);
      qr.make();

      const moduleCount = qr.getModuleCount();
      const canvas = document.getElementById('qrCanvas');
      const ctx = canvas.getContext('2d');
      const size = (moduleCount + 2 * quietZone) * pixelSize;
      canvas.width = canvas.height = size;

      let bgColor = "#fff", fgColor = "#000";
      if (theme === "red") { bgColor = "#000"; fgColor = "#ff0000"; }
      else if (theme === "blue") { bgColor = "#000"; fgColor = "#00ffff"; }

      ctx.fillStyle = bgColor;
      ctx.fillRect(0, 0, size, size);
      ctx.fillStyle = fgColor;

      for (let r = 0; r < moduleCount; r++) {
        for (let c = 0; c < moduleCount; c++) {
          if (qr.isDark(r, c)) {
            ctx.fillRect((c + quietZone) * pixelSize, (r + quietZone) * pixelSize, pixelSize, pixelSize);
          }
        }
      }

      document.getElementById('downloadLink').style.display = 'inline';
      document.getElementById('downloadLink').href = canvas.toDataURL();
    }

    function clearQR() {
      const canvas = document.getElementById('qrCanvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      document.getElementById('downloadLink').style.display = 'none';
    }
  </script>
</body>
</html>
